{% extends 'base.html' %}
{% block title %}Register{% endblock %}
{% block content %}
    <h2>Register</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="username">Username:</label>
        <input type="text" name="username" id="username" required>

        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required>

        <label for="password">Password:</label>
        <input type="password" name="password" id="password" required>

        <label for="phone_number">Phone Number:</label>
        <input type="text" name="phone_number" id="phone_number">

        <label for="address">Address:</label>
        <textarea name="address" id="address"></textarea>

        <label for="date_of_birth">Date of Birth:</label>
        <input type="date" name="date_of_birth" id="date_of_birth">

        <label for="profile_picture">Profile Picture:</label>
        <input type="file" name="profile_picture" id="profile_picture">

        <label for="role">Role:</label>
        <select name="role" id="role" required>
            <option value="">Select a role</option>
            <option value="Driver">Driver</option>
            <option value="Customer">Customer</option>
            <option value="Operator">Operator</option>
        </select>

        <!-- Driver-specific fields -->
        <div id="driver_fields" style="display: none;">
            <label for="license_number">License Number:</label>
            <input type="text" name="license_number" id="license_number">

            <label for="license_expiry_date">License Expiry Date:</label>
            <input type="date" name="license_expiry_date" id="license_expiry_date">

            <label for="emergency_contact_name">Emergency Contact Name:</label>
            <input type="text" name="emergency_contact_name" id="emergency_contact_name">

            <label for="emergency_contact_number">Emergency Contact Number:</label>
            <input type="text" name="emergency_contact_number" id="emergency_contact_number">

            <label for="experience_years">Years of Experience:</label>
            <input type="number" name="experience_years" id="experience_years">
        </div>

        <!-- Customer-specific fields -->
        <div id="customer_fields" style="display: none;">
            <label for="company_name">Company Name:</label>
            <input type="text" name="company_name" id="company_name">

            <label for="gst_number">GST Number:</label>
            <input type="text" name="gst_number" id="gst_number">
        </div>

        <!-- Operator-specific fields -->
        <div id="operator_fields" style="display: none;">
            <label for="assigned_region">Assigned Region:</label>
            <input type="text" name="assigned_region" id="assigned_region">
        </div>

        <button type="submit">Register</button>
    </form>

    <p>Already have an account? <a href="{% url 'login' %}">Login here</a></p>

    <script>
        document.getElementById('role').addEventListener('change', function() {
            var role = this.value;
            document.getElementById('driver_fields').style.display = (role === 'Driver') ? 'block' : 'none';
            document.getElementById('customer_fields').style.display = (role === 'Customer') ? 'block' : 'none';
            document.getElementById('operator_fields').style.display = (role === 'Operator') ? 'block' : 'none';
        });
    </script>
{% endblock %}
